{"version":3,"sources":["webpack:///./pages/login/login.js","webpack:///./pages/login/login.css"],"names":["_react","__webpack_require__","_reactRouterDom","_login","_request","Login","props","_classCallCheck","this","_this","_possibleConstructorReturn","__proto__","Object","getPrototypeOf","call","handleRequest","_ref","userName","password","_request2","default","url","data","user","success","setState","loginSuccess","fail","console","log","handleSubmit","e","preventDefault","form","validateFields","err","values","hasErrors","fieldsError","keys","some","field","state","_props$form","getFieldDecorator","isFieldTouched","getFieldError","getFieldsError","userNameErr","passwordErr","_react2","createElement","className","_login2","container","Redirect","to","_form2","onSubmit","Item","validateStatus","help","rules","required","message","_input2","size","prefix","_icon2","type","style","color","placeholder","valuePropName","initialValue","_checkbox2","login_btn_group","_button2","disabled","htmlType","login_btn","Component","LoginForm","create","module","exports"],"mappings":"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","file":"scripts/4.fc24f733b4cb3df04d59.js","sourcesContent":["import React from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { Form, Input, Icon, Button, Checkbox } from 'antd';\r\nimport style from './login.css';\r\nimport request from '../../helpers/request';\r\nclass Login extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            loginSuccess: false\r\n        }\r\n    }\r\n\r\n    render(){\r\n        let { loginSuccess } = this.state;\r\n        const { getFieldDecorator, isFieldTouched, getFieldError, getFieldsError } = this.props.form;\r\n        const userNameErr = isFieldTouched('userName') && getFieldError('userName');\r\n        const passwordErr = isFieldTouched('password') && getFieldError('password');\r\n        return (\r\n            <div className={style.container}>\r\n                {loginSuccess ? <Redirect to='/'/>: null}\r\n                <div className={style.form}>\r\n                    <Form onSubmit={this.handleSubmit}>\r\n                        <Form.Item validateStatus={userNameErr ? 'error' : ''} help={userNameErr || ''}>\r\n                            {getFieldDecorator('userName', {\r\n                                rules: [{ required: true, message: '请输入用户名' }],\r\n                            })(\r\n                                <Input size={'large'} prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />} placeholder=\"用户名\" />\r\n                            )}\r\n                        </Form.Item>\r\n                        <Form.Item validateStatus={passwordErr ? 'error' : ''} help={passwordErr || ''}>\r\n                            {getFieldDecorator('password', {\r\n                                rules: [{ required: true, message: '请输入密码' }],\r\n                            })(\r\n                                <Input type='password' size={'large'} prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />} placeholder=\"密码\" />\r\n                            )}\r\n                        </Form.Item>\r\n                        <Form.Item>\r\n                            {getFieldDecorator('remember', {\r\n                                valuePropName: 'checked',\r\n                                initialValue: true,\r\n                            })(\r\n                                <Checkbox>记住我</Checkbox>\r\n                            )}\r\n                        </Form.Item>\r\n                        <Form.Item  className={style.login_btn_group}>\r\n                            <Button\r\n                                disabled={this.hasErrors(getFieldsError())}\r\n                                size={'large'} type=\"primary\" htmlType=\"submit\" className={style.login_btn}>登录</Button>\r\n                        </Form.Item>\r\n                    </Form>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n    componentDidMount(){\r\n        this.props.form.validateFields();\r\n    }\r\n    handleRequest = ({userName, password}) => {\r\n          request({\r\n              url: \"/api/login\",\r\n              data: {\r\n                  user: userName,\r\n                  password: password\r\n              },\r\n              success:(data) => {\r\n                  this.setState({\r\n                      loginSuccess: true\r\n                  })\r\n              },\r\n              fail: (data) => {\r\n                  console.log('fail');\r\n              }\r\n          })\r\n    };\r\n    handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        this.props.form.validateFields((err, values) => {\r\n            if(err){\r\n\r\n            }else{\r\n                this.handleRequest(values);\r\n            }\r\n        });\r\n    };\r\n    hasErrors = (fieldsError) => {\r\n        return Object.keys(fieldsError).some(field => fieldsError[field]);\r\n    }\r\n}\r\nlet LoginForm = Form.create()(Login);\r\nexport default LoginForm;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"login__container\",\"form\":\"login__form\",\"login_btn_group\":\"login__login_btn_group\",\"login_btn\":\"login__login_btn\"};"],"sourceRoot":""}