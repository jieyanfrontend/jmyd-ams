(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1288:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=b(n(318)),o=b(n(55)),a=b(n(137)),i=b(n(1268)),u=b(n(1269)),l=b(n(1265)),s=b(n(17)),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(600),n(210),n(602),n(1267),n(317),n(1266),n(1270);var f=b(n(1)),p=n(211),d=b(n(1335)),y=b(n(1315));b(n(1333));function b(e){return e&&e.__esModule?e:{default:e}}var m=f.default.createElement(s.default,{type:"loading",style:{fontSize:24},spin:!0}),g=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.warning=function(e){l.default.warning({title:"警告",content:e.msg})},n.handleRequest=function(e){var t=e.userName,r=e.password;n.setState({loading:!0});var o=n.props.form.getFieldsValue();(0,y.default)({url:"/api/login",data:{user:t,password:r},success:function(e){sessionStorage.setItem("username",o.username),n.setState({loginSuccess:!0})},fail:function(e){console.log("fail"),n.warning(e)},complete:function(){n.setState({loading:!1})}})},n.handleSubmit=function(e){e.preventDefault(),n.props.form.validateFields(function(e,t){e||n.handleRequest(t)})},n.hasErrors=function(e){return Object.keys(e).some(function(t){return e[t]})},n.state={loginSuccess:!1,loading:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.default.Component),c(t,[{key:"render",value:function(){var e=this.state.loginSuccess,t=this.props.form,n=t.getFieldDecorator,l=t.isFieldTouched,c=t.getFieldError,y=t.getFieldsError,b=l("userName")&&c("userName"),g=l("password")&&c("password");return f.default.createElement("div",{className:d.default.container},e?f.default.createElement(p.Redirect,{to:"/"}):null,f.default.createElement("div",{className:d.default.form},f.default.createElement(r.default,{spinning:this.state.loading,tip:"登陆中...",indicator:m},f.default.createElement(i.default,{onSubmit:this.handleSubmit},f.default.createElement(i.default.Item,{validateStatus:b?"error":"",help:b||""},n("userName",{rules:[{required:!0,message:"请输入用户名"}]})(f.default.createElement(u.default,{size:"large",prefix:f.default.createElement(s.default,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"用户名"}))),f.default.createElement(i.default.Item,{validateStatus:g?"error":"",help:g||""},n("password",{rules:[{required:!0,message:"请输入密码"}]})(f.default.createElement(u.default,{type:"password",size:"large",prefix:f.default.createElement(s.default,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"密码"}))),f.default.createElement(i.default.Item,null,n("remember",{valuePropName:"checked",initialValue:!0})(f.default.createElement(a.default,null,"记住我"))),f.default.createElement(i.default.Item,{className:d.default.login_btn_group},f.default.createElement(o.default,{disabled:this.hasErrors(y()),size:"large",type:"primary",htmlType:"submit",className:d.default.login_btn},"登录"))))))}},{key:"componentDidMount",value:function(){this.props.form.validateFields()}}]),t}(),v=i.default.create()(g);t.default=v},1315:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(1265));n(1266);var o=u(n(1317)),a=u(n(1316)),i=u(n(599));function u(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.url,n=e.method,u=void 0===n?"POST":n,l=e.postType,s=void 0===l?"json":l,c=e.data,f=void 0===c?{}:c,p=e.success,d=void 0===p?function(){}:p,y=e.fail,b=void 0===y?function(){}:y,m=e.complete,g=void 0===m?function(){}:m;if(!t)throw new Error("url参数不可缺省");var v=new XMLHttpRequest;v.open(u,t);var h=void 0;switch(s){case"json":v.setRequestHeader("Content-Type","application/json"),h=(0,o.default)(f);break;case"formdata":h=(0,a.default)(f);break;default:v.setRequestHeader("Content-Type","application/json"),h=(0,o.default)(f)}v.onreadystatechange=function(){if(4===v.readyState){if(200===v.status){var e=JSON.parse(v.responseText),t=e.code;try{if(void 0===t)throw new Error("code is not defined")}catch(t){e=JSON.parse(e)}200===parseInt(e.code)?d(e):403===e.code?(i.default.push("/login"),r.default.warning({title:"警告",content:e.msg})):(r.default.warning({title:"警告",content:e.msg}),b(e))}else alert("请求遇到了问题，请稍后再尝试"),b(f);g()}},v.send(h)}},1316:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){var t=new FormData;return Object.keys(e).map(function(n){Array.isArray(e[n])?e[n].forEach(function(e){t.append(n,e)}):t.append(n,e[n])}),t}},1317:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){return JSON.stringify(e)}},1333:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,a,i,u,l,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(46);function f(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function p(e,t,n,r,o){var a={};return Object.keys(r).forEach(function(e){a[e]=r[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var d=(r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"type",o,this),f(this,"isDisabledBtn",a,this),f(this,"loading",i,this),f(this,"wf_id",u,this),f(this,"inputValue",l,this)}return s(e,[{key:"changeType",value:function(e){this.type=e}},{key:"changeBtn",value:function(e){this.isDisabledBtn=e}},{key:"setLoading",value:function(e){this.loading=e}},{key:"setWf_id",value:function(e){this.wf_id=e}},{key:"setInputValue",value:function(e){this.inputValue=Object.assign({},this.inputValue,e)}}]),e}(),o=p(r.prototype,"type",[c.observable],{enumerable:!0,initializer:function(){return"批开停开机"}}),p(r.prototype,"changeType",[c.action],Object.getOwnPropertyDescriptor(r.prototype,"changeType"),r.prototype),a=p(r.prototype,"isDisabledBtn",[c.observable],{enumerable:!0,initializer:function(){return!1}}),p(r.prototype,"changeBtn",[c.action],Object.getOwnPropertyDescriptor(r.prototype,"changeBtn"),r.prototype),i=p(r.prototype,"loading",[c.observable],{enumerable:!0,initializer:function(){return!1}}),p(r.prototype,"setLoading",[c.action],Object.getOwnPropertyDescriptor(r.prototype,"setLoading"),r.prototype),u=p(r.prototype,"wf_id",[c.observable],{enumerable:!0,initializer:function(){return{}}}),p(r.prototype,"setWf_id",[c.action],Object.getOwnPropertyDescriptor(r.prototype,"setWf_id"),r.prototype),l=p(r.prototype,"inputValue",[c.observable],{enumerable:!0,initializer:function(){return{word1Input:"",word2Input:"",word3Input:"",word4Input:"",word5Input:"",word6Input:"",word7Input:"",word8Input:"",word9Input:""}}}),p(r.prototype,"setInputValue",[c.action],Object.getOwnPropertyDescriptor(r.prototype,"setInputValue"),r.prototype),r);t.default=new d},1335:function(e,t,n){e.exports={container:"login_container",form:"login_form",login_btn_group:"login_login_btn_group",login_btn:"login_login_btn"}}}]);
//# sourceMappingURL=6_0dda41c44f5770b71c49.js.map