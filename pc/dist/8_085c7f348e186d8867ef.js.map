{"version":3,"sources":["webpack:///./pages/batch_process/batch_process.js","webpack:///./helpers/request.js","webpack:///./helpers/handle-formdata.js","webpack:///./helpers/handle-json.js","webpack:///./pages/batch_process/store.js","webpack:///./helpers/handle-urlencode.js","webpack:///./helpers/export-file.js","webpack:///./helpers/has-errors.js","webpack:///./config/common-modal.js","webpack:///./config/common-form.js","webpack:///./helpers/successMessage.js","webpack:///./pages/edit_a/edit_a.js","webpack:///./pages/create_a/create_a.js","webpack:///./pages/batch_process/batch_process.css"],"names":["__webpack_require__","_mobxReact","_index","_select2","default","Option","Search","_input2","antIcon","_react2","createElement","_icon2","type","style","fontSize","spin","BatchProcess","state","loading","columns","title","dataIndex","render","text","record","className","_batch_process2","operate","onClick","_this","editItem","deleteItem","goToDetail","id","wf_id","createA","setCreateVisible","fetchFileAList","setState","_request2","url","data","keyword","success","_ref2","table","_store2","setFileAList","fail","res","warning","complete","Modal","content","msg","handQuery","val","getFieldsValue","props","form","_ref3","bool","setVisible","create","setEditVisible","edit","item","setSelectedItem","Object","assign","editType","_history2","push","Component","_this2","this","visible","list","selectedItem","fileAList","dataSource","Array","from","wf_ids","titles","creators","getFieldDecorator","_form2","layout","Item","fr","placeholder","onSearch","value","enterButton","action_bar","_button2","_spin2","spinning","tip","indicator","_table2","rowKey","_create_a2","_edit_a2","_ref","_ref$method","method","undefined","_ref$postType","postType","_ref$data","_ref$success","_ref$fail","_ref$complete","Error","xml","XMLHttpRequest","open","postData","setRequestHeader","_handleJson2","_handleFormdata2","onreadystatechange","readyState","status","JSON","parse","responseText","code","e","parseInt","_modal2","alert","send","ret","FormData","keys","map","k","isArray","forEach","d","append","stringify","_mobx","store","allWf_ids","allTitles","allCreators","file","creator","Set","key","join","_handleUrlencode","_ref$url","window","_handleUrlencode2","errors","some","width","maskClosable","labelCol","span","gutter","wrapperCol","_message3","_react","EditA","ensure","selectItem","getFieldsError","_hasErrors2","_edit","_delete","closeModal","_successMessage2","reason","_props","isFieldTouched","getFieldError","editVisible","create_time","modalTitle","titleError","reasonError","isDisabledBtn","_extends","onCancel","footer","Fragment","disabled","destroyOnClose","_commonModal2","label","_commonForm2","help","validateStatus","initialValue","rules","required","message","display","validateFields","CreateA","fileList","uploadProps","onChange","beforeUpload","onRemove","setFieldsValue","_this$props$form","values","canCreate","createVisible","wf_idErr","titleErr","fileErr","_upload2","module","exports","select"],"mappings":"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","file":"8_085c7f348e186d8867ef.js","sourcesContent":["import React from 'react';\r\nimport {Form, Select, Button, Input, Table, Spin, Icon} from 'antd';\r\nconst Option = Select.Option;\r\nimport { observer } from 'mobx-react';\r\nimport store from './store';\r\nimport style from './batch_process.css';\r\nimport CreateA from '../create_a/create_a';\r\nimport EditA from '../edit_a/edit_a';\r\nimport request from '../../helpers/request';\r\nimport history from '../../history';\r\nimport exportFile from '../../helpers/export-file';\r\nimport {Modal} from \"antd/lib/index\";\r\n\r\nconst Search = Input.Search;\r\nconst antIcon = <Icon type=\"loading\" style={{ fontSize: 24 }} spin />;\r\n@observer\r\nclass BatchProcess extends React.Component{\r\n    state = {\r\n      loading:false\r\n    };\r\n    columns = [{\r\n        title: '编号',\r\n        dataIndex: 'id'\r\n    }, {\r\n        title: '效率100编号',\r\n        dataIndex: 'wf_id'\r\n    }, {\r\n        title: '标题',\r\n        dataIndex: 'title'\r\n    }, {\r\n        title: '创建人',\r\n        dataIndex: 'creator'\r\n    }, {\r\n        title: '创建时间',\r\n        dataIndex: 'create_time'\r\n    }, {\r\n        title: '操作',\r\n        render: (text, record) => (\r\n            <span>\r\n                <a className={style.operate} onClick={() => this.editItem(record)}>编辑</a>\r\n                <a className={style.operate} onClick={() => this.deleteItem(record)}>删除</a>\r\n                <a className={style.operate} onClick={() => this.goToDetail(record.id,record.wf_id)}>查看详情</a>\r\n            </span>\r\n        )\r\n    }];\r\n    render(){\r\n        let { visible, list, selectedItem, fileAList, loading,} = store;\r\n        let dataSource = Array.from(fileAList);\r\n        let { wf_ids, titles, creators } = list;\r\n        let { getFieldDecorator } = this.props.form;\r\n        let SelectBar = () => (\r\n            <Form layout='inline'>\r\n                <Form.Item className={style.fr}>\r\n                    <Search placeholder='请输入关键字' onSearch={value => this.handQuery(value)} enterButton/>\r\n                </Form.Item>\r\n            </Form>\r\n        );\r\n        return(\r\n            <div className={'init-height'}>\r\n                <SelectBar />\r\n                <div className={style.action_bar}>\r\n                    <Button type='primary' onClick={this.createA}>创建任务</Button>\r\n                </div>\r\n                <Spin spinning={this.state.loading} tip='加载中...' indicator={antIcon}>\r\n                    <Table columns={this.columns} dataSource={dataSource} rowKey='id'/>\r\n                </Spin>\r\n                <CreateA setVisible={this.setCreateVisible} visible={visible} selectedItem={selectedItem}/>\r\n                <EditA setVisible={this.setEditVisible} visible={visible} selectedItem={selectedItem}/>\r\n            </div>\r\n        )\r\n    }\r\n    componentDidMount(){\r\n        this.fetchFileAList();\r\n    }\r\n    createA = () => {\r\n        this.setCreateVisible(true);\r\n    };\r\n    fetchFileAList = () => {\r\n        this.setState({\r\n            loading:true\r\n        });\r\n        request({\r\n            url: '/api/get_flow_list',\r\n            data: {\r\n                keyword: ''\r\n            },\r\n            success: ({table}) => {\r\n                store.setFileAList(table);\r\n            },\r\n            fail: (res) => {\r\n                this.warning(res);\r\n            },\r\n            complete: () => {\r\n                this.setState({\r\n                    loading:false\r\n                });\r\n            }\r\n        })\r\n    };\r\n    warning = (res) => {\r\n        Modal.warning({\r\n            title:'警告',\r\n            content: res.msg\r\n        })\r\n    }\r\n    handQuery = (val)=>{\r\n        let {form} = this.props;\r\n        let {getFieldsValue} = form;\r\n        let values = getFieldsValue();\r\n        let {keyword} = values;\r\n        request({\r\n            url: '/api/get_flow_list',\r\n            data: {\r\n                keyword: val,\r\n            },\r\n            success: ({table}) => {\r\n                store.setFileAList(table);\r\n            }\r\n        })\r\n    }\r\n    setCreateVisible = (bool) => {\r\n        store.setVisible({\r\n            create: bool\r\n        });\r\n    };\r\n    setEditVisible = (bool) => {\r\n        store.setVisible({\r\n            edit: bool\r\n        });\r\n    };\r\n    editItem = (item) => {\r\n        store.setSelectedItem(Object.assign({}, item, {\r\n            editType: 'edit'\r\n        }));\r\n        store.setVisible({\r\n            edit: true\r\n        })\r\n    };\r\n    deleteItem = (item) => {\r\n        store.setSelectedItem(Object.assign({}, item, {\r\n            editType: 'delete'\r\n        }));\r\n        store.setVisible({\r\n            edit: true\r\n        })\r\n    };\r\n    goToDetail = (id,wf_id) => {\r\n        history.push(`/process/${id}/${wf_id}`)\r\n    };\r\n    // exportFileA = () => {\r\n    //     let values = this.props.form.getFieldsValue();\r\n    //     console.log(values);\r\n    //     // exportFile({\r\n    //     //   url: '/api/get_file',\r\n    //     //   data: data\r\n    //     // })\r\n    // }\r\n}\r\nexport default Form.create()(BatchProcess);","import handleJson from './handle-json';\r\nimport handleFormData from './handle-formdata';\r\nimport history from '../history'\r\nimport {Modal} from \"antd\";\r\n\r\nfunction request({ url, method = 'POST', postType = 'json' ,data = {}, success = () => {}, fail = () => {}, complete = () => {}}) {\r\n    if(!url){\r\n        throw new Error('url参数不可缺省');\r\n    }\r\n    let xml = new XMLHttpRequest();\r\n    xml.open(method, url);\r\n    let postData ;\r\n    switch (postType){\r\n        case 'json':\r\n            xml.setRequestHeader('Content-Type', 'application/json');\r\n            postData = handleJson(data);\r\n            break;\r\n        case 'formdata':\r\n            // xml.setRequestHeader('Content-Type', \"application/vnd.ms-excel\");\r\n            postData = handleFormData(data);\r\n            break;\r\n        default:\r\n            xml.setRequestHeader('Content-Type', 'application/json');\r\n            postData = handleJson(data);\r\n    }\r\n    xml.onreadystatechange = () => {\r\n        if(xml.readyState === 4){\r\n            if(xml.status === 200){\r\n                let data = JSON.parse(xml.responseText);\r\n                let code = data.code;\r\n                try{\r\n                    if(code === undefined) throw new Error('code is not defined');\r\n                }catch(e){\r\n                    data = JSON.parse(data);\r\n                }\r\n                if(parseInt(data.code) === 200){\r\n                    success(data);\r\n                }else{\r\n                    if(data.code === 403){\r\n                        history.push('/login');\r\n                        Modal.warning({\r\n                            title:'警告',\r\n                            content: data.msg\r\n                        })\r\n                    }else{\r\n                        Modal.warning({\r\n                            title:'警告',\r\n                            content: data.msg\r\n                        });\r\n                        fail(data)\r\n                    }\r\n                }\r\n            }else{\r\n                alert('请求遇到了问题，请稍后再尝试');\r\n                fail(data);\r\n            }\r\n            complete();\r\n        }\r\n    };\r\n    xml.send(postData);\r\n\r\n}\r\n\r\n\r\nexport default request;\r\n","let handleFormData = (data) => {\r\n    let ret = new FormData();\r\n    Object.keys(data).map(k => {\r\n        if(Array.isArray(data[k])){\r\n            data[k].forEach(d => {\r\n                ret.append(k,d);\r\n            })\r\n        }else{\r\n            ret.append(k,data[k]);\r\n        }\r\n    });\r\n    return ret;\r\n};\r\nexport default handleFormData;","let handleJson = (data) => {\r\n    return JSON.stringify(data);\r\n};\r\nexport default handleJson;","import { observable, action, computed } from 'mobx';\r\nclass Store {\r\n  @observable visible = {\r\n    create: false,\r\n    edit: false,\r\n  };\r\n  @action\r\n  setVisible(type){\r\n    this.visible = Object.assign({}, this.visible, type);\r\n  }\r\n  @observable loading = false;\r\n  @action\r\n  setLoading(res){\r\n    this.loading = res;\r\n  }\r\n  @observable fileAList = [];\r\n  @action\r\n  setFileAList(list){\r\n    this.fileAList = list;\r\n  }\r\n  @computed\r\n  get list(){\r\n    let allWf_ids = [],\r\n      allTitles = [],\r\n      allCreators = [];\r\n    this.fileAList.map(file => {\r\n      allWf_ids.push(file.wf_id);\r\n      allTitles.push(file.title);\r\n      allCreators.push(file.creator);\r\n    });\r\n    return {\r\n      wf_ids: Array.from(new Set(allWf_ids)),\r\n      titles: Array.from(new Set(allTitles)),\r\n      creators: Array.from(new Set(allCreators))\r\n    }\r\n  }\r\n  @observable selectedItem = {\r\n    //editType: 'edit'\r\n  };\r\n  @action\r\n  setSelectedItem(item){\r\n    this.selectedItem = item;\r\n  }\r\n}\r\n\r\nlet store = new Store();\r\nexport default store;\r\n","let handleUrlEncode = (data) => {\r\n    return Object.keys(data).map(key => {\r\n        return key + '=' + data[key];\r\n    }).join('&');\r\n};\r\nexport default handleUrlEncode;","import handleUrlEncode from './handle-urlencode';\r\nlet exportFile = ({url = '', data = {}}) => {\r\n    window.open(url + '?' + handleUrlEncode(data));\r\n};\r\nexport default exportFile;","export default (errors) => {\r\n  return Object.keys(errors).some(key => errors[key]);\r\n}","export default {\r\n  width: 800,\r\n  maskClosable: false\r\n}","export default {\r\n  labelCol: {\r\n    span: 4,\r\n    gutter: 16\r\n  },\r\n  wrapperCol: {\r\n    span: 18,\r\n    gutter: 16\r\n  }\r\n}","import {Modal, message, notification} from 'antd';\r\nimport React from  'react'\r\n\r\nconst messageSuccess = (res) => {\r\n    message.success(res.msg);\r\n};\r\n\r\nexport default messageSuccess","import React, { Component } from 'react';\r\nimport { Modal, Form, Input, Button } from 'antd';\r\nimport CommonModalConfig from '../../config/common-modal';\r\nimport CommonFormConfig from '../../config/common-form';\r\nimport request from '../../helpers/request';\r\nimport hasErrors from '../../helpers/has-errors';\r\nimport store from \"../batch_process/store\";\r\nimport messageSuccess from '../../helpers/successMessage';\r\n\r\nclass EditA extends Component{\r\n  render(){\r\n    let { selectedItem, visible, form } = this.props;\r\n    let { isFieldTouched, getFieldError,getFieldsError, getFieldDecorator } = form;\r\n    let editVisible = visible.edit;\r\n    let { editType, id, wf_id, title, creator, create_time } = selectedItem;\r\n    let modalTitle = editType === 'edit' ? '编辑' : '删除';\r\n    let titleError = isFieldTouched('title') && getFieldError('title');\r\n    let wf_idError = isFieldTouched('wf_id') && getFieldError('wf_id');\r\n    let reasonError = isFieldTouched('reason') && getFieldError('reason');\r\n    let isDisabledBtn = editType === 'edit' ? hasErrors(getFieldsError(['title', 'wf_id'])) : hasErrors(getFieldsError(['reason']));\r\n    let ModalFooter = () => (\r\n      <React.Fragment>\r\n        <Button onClick={this.closeModal}>取消</Button>\r\n        <Button type='primary' disabled={isDisabledBtn} onClick={this.ensure}>确定</Button>\r\n      </React.Fragment>\r\n    );\r\n      return (\r\n      <Modal visible={editVisible} title={`${modalTitle}----一级明细`} onCancel={this.closeModal} footer={<ModalFooter/>} destroyOnClose={true} {...CommonModalConfig}>\r\n        <Form>\r\n          <Form.Item label='编号' { ...CommonFormConfig}>{id}</Form.Item>\r\n          <Form.Item\r\n            // validateStatus={wf_idError ? 'error':''}\r\n            label='效率100编号' { ...CommonFormConfig}>\r\n            {/*{editType !== 'edit' ? wf_id : getFieldDecorator('wf_id', {*/}\r\n              {/*initialValue: wf_id,*/}\r\n              {/*rules: [{*/}\r\n                {/*required: true,*/}\r\n                {/*message: '请输入效率100编号'*/}\r\n              {/*}]*/}\r\n            {/*})(*/}\r\n              {/*<Input disabled={true}/>*/}\r\n            {/*)}*/}{wf_id}\r\n          </Form.Item>\r\n          <Form.Item\r\n            label='标题'\r\n            help={titleError ? titleError : ''}\r\n            validateStatus={titleError ? 'error':''}\r\n           { ...CommonFormConfig}>\r\n            {editType !== 'edit' ? title : getFieldDecorator('title', {\r\n              initialValue: title,\r\n              rules: [{\r\n                required: true,\r\n                message: '请输入标题'\r\n              }]\r\n            })(\r\n              <Input/>\r\n            )}\r\n          </Form.Item>\r\n          <Form.Item label='创建人' { ...CommonFormConfig}>{creator}</Form.Item>\r\n          <Form.Item label='创建时间' { ...CommonFormConfig}>{create_time}</Form.Item>\r\n          {editType === 'edit' ? null : (\r\n            <Form.Item\r\n            style={{display: editType === 'edit' ? 'none' : 'block'}}\r\n            help={reasonError ? reasonError : ''}\r\n            validateStatus={ reasonError ? 'error' : ''}\r\n            label='删除原因' { ...CommonFormConfig}>\r\n            {getFieldDecorator('reason', {\r\n              rules: [{\r\n                required: editType !== 'edit',\r\n                message: '请输入删除原因'\r\n              }]\r\n            })(\r\n              <Input placeholder='必填'/>\r\n            )}\r\n            </Form.Item>\r\n          )}\r\n        </Form>\r\n      </Modal>\r\n    )\r\n  }\r\n  componentDidMount(){\r\n    this.props.form.validateFields();\r\n  }\r\n  ensure = () => {\r\n    let selectItem = this.props.selectedItem;\r\n    let { getFieldsError } = this.props.form;\r\n    let canPost = !hasErrors(getFieldsError);\r\n    if(canPost){\r\n      if(selectItem.editType === 'edit'){\r\n        this._edit();\r\n      }else{\r\n        this._delete();\r\n      }\r\n    }\r\n  };\r\n  _edit = () => {\r\n    let { form } = this.props;\r\n    let { title } = form.getFieldsValue();\r\n    let id = this.props.selectedItem.id;\r\n      request({\r\n      url: '/api/alert_flow',\r\n      data: {\r\n        id,\r\n        title\r\n      },\r\n      success: res => {\r\n        this.closeModal();\r\n          messageSuccess(res);\r\n          this.fetchFileAList();\r\n      },\r\n      fail: (res) => {\r\n        // this.warning(res)\r\n      }\r\n    })\r\n  };\r\n    warning=  (res) => {\r\n        Modal.warning({\r\n            title:'警告',\r\n            content: res.msg\r\n        })\r\n    };\r\n  _delete = () => {\r\n    let { form } = this.props;\r\n    let { reason } = form.getFieldsValue();\r\n    let id = this.props.selectedItem.id;\r\n    request({\r\n      url: '/api/delete_flow',\r\n      data: {\r\n        id,\r\n        reason\r\n      },\r\n      success: (res) => {\r\n        this.closeModal();\r\n        messageSuccess(res)\r\n          this.fetchFileAList();\r\n      },\r\n      fail: (res) => {\r\n          // this.warning(res)\r\n      }\r\n    })\r\n  };\r\n  closeModal = () => {\r\n    let { setVisible } = this.props;\r\n    setVisible(false)\r\n  }\r\n    fetchFileAList = () => {\r\n        request({\r\n            url: '/api/get_flow_list',\r\n            data: {\r\n                keyword: ''\r\n            },\r\n            success: ({table}) => {\r\n                store.setFileAList(table);\r\n            }\r\n        })\r\n    };\r\n}\r\nexport default Form.create()(EditA);","import React, {Component} from 'react';\r\nimport {Form, Modal, Input, Upload, Button, Icon, DatePicker} from 'antd';\r\nimport commonFormProps from '../../config/common-form';\r\nimport commonModalProps from '../../config/common-modal';\r\nimport request from '../../helpers/request';\r\nimport hasErrors from '../../helpers/has-errors';\r\nimport store from \"../batch_process/store\";\r\n\r\nclass CreateA extends Component {\r\n    state = {\r\n        fileList: []\r\n    };\r\n    uploadProps = {\r\n        onChange: ({fileList}) => {\r\n            this.setState({\r\n                fileList\r\n            })\r\n        },\r\n        beforeUpload: () => false,\r\n        onRemove: () => {\r\n            this.props.form.setFieldsValue({\r\n                file: null\r\n            });\r\n            this.setState({\r\n                fileList: []\r\n            }, () => {\r\n                this.props.form.validateFields();\r\n            })\r\n        }\r\n    };\r\n\r\n    render() {\r\n        let {form, setVisible, visible} = this.props;\r\n        let {fileList} = this.state;\r\n        let createVisible = visible.create;\r\n        let {getFieldDecorator, isFieldTouched, getFieldError, getFieldsError} = form;\r\n        let wf_idErr = isFieldTouched('wf_id') && getFieldError('wf_id'),\r\n            titleErr = isFieldTouched('title') && getFieldError('title'),\r\n            fileErr = isFieldTouched('file') && getFieldError('file');\r\n        let ModalFooter = () => (\r\n            <React.Fragment>\r\n                <Button onClick={() => setVisible(false)}>取消</Button>\r\n                <Button type='primary' disabled={hasErrors(getFieldsError())} onClick={this.createA}>确认</Button>\r\n            </React.Fragment>\r\n        );\r\n        return (\r\n            <Modal visible={createVisible} title='创建任务' footer={<ModalFooter/>}\r\n                   onCancel={() => setVisible(false)} {...commonModalProps}>\r\n                <Form>\r\n                    <Form.Item\r\n                        help={wf_idErr ? wf_idErr : ''}\r\n                        validateStatus={wf_idErr ? 'error' : ''}\r\n                        label='效率100编号' {...commonFormProps}>{\r\n                        getFieldDecorator('wf_id', {\r\n                            rules: [{\r\n                                required: true,\r\n                                message: '请输入效率100编号'\r\n                            }]\r\n                        })(\r\n                            <Input/>\r\n                        )\r\n                    }</Form.Item>\r\n                    <Form.Item\r\n                        help={titleErr ? titleErr : ''}\r\n                        validateStatus={titleErr ? 'error' : ''}\r\n                        label='标题' {...commonFormProps}> {\r\n                        getFieldDecorator('title', {\r\n                            rules: [{\r\n                                required: true,\r\n                                message: '请输入标题'\r\n                            }]\r\n                        })(\r\n                            <Input/>\r\n                        )\r\n                    }</Form.Item>\r\n{/*                    <Form.Item\r\n                        help={titleErr ? titleErr : ''}\r\n                        validateStatus={titleErr ? 'error' : ''}\r\n                        label='创建时间' {...commonFormProps}> {\r\n                        getFieldDecorator('create_time', {\r\n                            rules: [{\r\n                                required: true,\r\n                                message: '请输入创建时间'\r\n                            }]\r\n                        })(\r\n                            <DatePicker />\r\n                        )\r\n                    }</Form.Item>*/}\r\n                    <Form.Item\r\n                        help={fileErr ? fileErr : ''}\r\n                        validateStatus={fileErr ? 'error' : ''}\r\n                        label='导入A类文件' {...commonFormProps}>{\r\n                        getFieldDecorator('file', {\r\n                            rules: [{\r\n                                required: true,\r\n                                message: '请选择文件导入'\r\n                            }]\r\n                        })(\r\n                            <Upload {...this.uploadProps} fileList={fileList}>\r\n                                <Button>\r\n                                    <Icon type=\"upload\"/>选择文件\r\n                                </Button>\r\n                            </Upload>\r\n                        )\r\n                    }</Form.Item>\r\n                </Form>\r\n            </Modal>\r\n        )\r\n    }\r\n    createA = () => {\r\n        let {getFieldsValue, getFieldsError} = this.props.form;\r\n        let values = getFieldsValue();\r\n        let {wf_id, title, file} = values;\r\n        let canCreate = !hasErrors(getFieldsError());\r\n        if(!file){\r\n            alert('请选择上传文件')\r\n        }else{\r\n            if (canCreate) {\r\n                request({\r\n                    url: '/api/create_flow',\r\n                    data: {\r\n                        wf_id,\r\n                        title,\r\n                        file: file.file},\r\n                    postType: 'formdata',\r\n                    success: (res) => {\r\n                        this.props.setVisible(false);\r\n                        this.fetchFileAList();\r\n                    },\r\n                    fail: (res) => {\r\n                        this.warning(res)\r\n                        this.props.setVisible(false);\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    };\r\n    warning = (res) => {\r\n        Modal.warning({\r\n            title:'警告',\r\n            content: res.msg\r\n        })\r\n    };\r\n    fetchFileAList = () => {\r\n        request({\r\n            url: '/api/get_flow_list',\r\n            data: {\r\n                keyword: ''\r\n            },\r\n            success: ({table}) => {\r\n                store.setFileAList(table);\r\n            }\r\n        })\r\n    };\r\n\r\n}\r\n\r\nexport default Form.create()(CreateA);","// extracted by mini-css-extract-plugin\nmodule.exports = {\"select\":\"batch_process_select\",\"fr\":\"batch_process_fr\",\"action_bar\":\"batch_process_action_bar\",\"operate\":\"batch_process_operate\"};"],"sourceRoot":""}